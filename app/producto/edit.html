<ng-include src="'include/menu.html'"></ng-include>

<ng-include src="'include/header.html'"></ng-include>

<ng-include src="'include/status.html'"></ng-include>

<div class="container" ng-show="status.success==''&&status.error==''">
    <div class="row">
        <div class="col">

            <form name="editForm" novalidate>
                <div class="form-group row">
                    <label for="inputId" class="col-sm-2 col-form-label">Id: </label>
                    <div class="col-sm-2">
                        <input type="text" class="form-control" id="inputId" placeholder="Id" ng-model="entityData.id"
                            disabled>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="inputNombre" class="col-sm-2 col-form-label">Nombre: </label>
                    <div class="col-sm-10">
                        <input name="inputNombre"
                            ng-class="{ 'is-valid' : editForm.inputNombre.$valid && editForm.inputNombre.$dirty , 'is-invalid' : editForm.inputNombre.$invalid && editForm.inputNombre.$dirty}"
                            type="text" class="form-control" id="inputNombre" placeholder="Nombre"
                            ng-model="entityData.nombre" ng-pattern="/^[A-Z][A-Za-záéíóúüñÁÉÍÓÚÜÑ\s]{5,60}$/" required>
                        <div ng-show="editForm.inputNombre.$invalid" class="invalid-feedback">
                            Por favor, introduce un nombre de 5 a 60 caracteres. Puedes usar combinaciones de
                            caracteres
                            en mayúsculas y minúsculas, con dígitos. </div>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="inputCodigo" class="col-sm-2 col-form-label">Código: </label>
                    <div class="col-sm-10">
                        <input name="inputCodigo"
                            ng-class="{ 'is-valid' : editForm.inputCodigo.$valid && editForm.inputCodigo.$dirty , 'is-invalid' : editForm.inputCodigo.$invalid && editForm.inputCodigo.$dirty}"
                            type="text" class="form-control" id="inputCodigo" placeholder="Codigo"
                            ng-model="entityData.codigo" ng-pattern="/^[A-Z0-9][A-Z0-9\-]{3,15}$/" required>
                        <div ng-show="editForm.inputCodigo.$invalid" class="invalid-feedback">
                            Por favor, introduce un codigo correcto. Puede utilizar mayúsculas, números y guiones.
                        </div>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="inputExistencias" class="col-sm-2 col-form-label">Existencias: </label>
                    <div class="col-sm-2">
                        <input name="inputExistencias"
                            ng-class="{ 'is-valid' : editForm.inputExistencias.$valid && editForm.inputExistencias.$dirty , 'is-invalid' : editForm.inputExistencias.$invalid && editForm.inputExistencias.$dirty}"
                            type="number" class="form-control" id="inputExistencias" placeholder="existencias"
                            ng-model="entityData.existencias" ng-pattern="/^[0-9][0-9]{0,3}$/" required>
                        <div ng-show="editForm.inputExistencias.$invalid" class="invalid-feedback">
                            Por favor, introduce un número entero válido. </div>
                    </div>
                </div>


                <div class="form-group row">
                    <label for="inputPrecio" class="col-sm-2 col-form-label">Precio: </label>
                    <div class="col-sm-2">
                        <input name="inputPrecio"
                            ng-class="{ 'is-valid' : editForm.inputPrecio.$valid && editForm.inputPrecio.$dirty , 'is-invalid' : editForm.inputPrecio.$invalid && editForm.inputPrecio.$dirty}"
                            type="text" class="form-control" id="inputPrecio" placeholder="Precio"
                            ng-model="entityData.precio" ng-pattern="/^([0-9][0-9]{0,3})[.]([0-9]{2})*$/" required>
                        <div ng-show="editForm.inputPrecio.$invalid" class="invalid-feedback">
                            Por favor, introduce un precio válido. </div>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="file" class="col-sm-2 col-form-label">Imagen:</label>
                    <div class="col-sm-10">
                        <div><img src="http://localhost:8082/file/{{entityData.imagen}}" height="100" /></div>
                    </div>
                    <label for="file" class="col-sm-2 col-form-label mt-4">Nueva Imagen:</label>
                    <div class="col-sm-10 mt-4">
                        <img ng-src="{{previewImage}}" ng-show="previewImage != null" alt="" style="height:200px" />
                        <div class="custom-file">
                            <input type="file" ng-model="file" class="form-control-file mt-4" lang="es"
                                ng-class="{ 'is-valid' : editForm.file.$valid && editForm.file.$dirty ,'is-invalid' : !editForm.file.$valid && !editForm.file.$pristine}"
                                name="file" onchange="angular.element(this).scope().SelectFile(event)" />
                        </div>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="inputDescuento" class="col-sm-2 col-form-label">Descuento: </label>
                    <div class="col-sm-2">
                        <input name="inputDescuento"
                            ng-class="{ 'is-valid' : editForm.inputDescuento.$valid && editForm.inputDescuento.$dirty , 'is-invalid' : editForm.inputDescuento.$invalid && editForm.inputDescuento.$dirty}"
                            type="text" class="form-control" id="inputDescuento" placeholder="Descuento"
                            ng-model="entityData.descuento" ng-pattern="/^[0-9][0-9]{0,1}$/" required>
                        <div ng-show="editForm.inputDescuento.$invalid" class="invalid-feedback">
                            Por favor, introduce descuento correcto usando solo números. </div>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="inputidtipoproducto" class="col-sm-2 col-form-label">Tipo de producto: </label>
                    <div class="col-sm-6">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="btn-secondary btn" data-toggle="modal" data-target="#modalTipoProducto">
                                    <i ng-class="iconService.getIcon('buscar')"></i>
                                </div>
                            </div>
                            <input name="inputidtipoproducto"
                                ng-class="{ 'is-valid' : newForm.inputidtipoproducto.$valid && newForm.inputidtipoproducto.$dirty , 'is-invalid' : newForm.inputidtipoproducto.$invalid && newForm.inputidtipoproducto.$dirty}"
                                type="text" class="form-control" id="inputidtipoproducto"
                                ng-change="lookupTipoproducto()" ng-minlength="1" ng-maxlength="10"
                                placeholder="Tipo producto" ng-model="entityData.tipoproducto.id" ng-pattern="/^\d+$/"
                                ng-model-options="{debounce: 1000}" required>
                            <div class="input-group-append">
                                <div class="btn-secondary btn" role="alert">
                                    {{entityData.tipoproducto.nombre}}
                                </div>
                            </div>
                            <div ng-show="newForm.inputidtipoproducto.$invalid" class="invalid-feedback">
                                Por favor introduce valor numérico entero </div>
                        </div>
                    </div>
                    <tipoproductoselection class="modal fade" id="modalTipoProducto" obj="entityData.tipoproducto">
                    </tipoproductoselection>
                </div>

                <div class="form-group row text-right">
                    <div class="col-sm-12">
                        <button type="submit" class="btn btn-success"
                            ng-disabled="editForm.$invalid||editForm.$pristine" ng-click="save()">Guardar</button>
                        <a type="button" class="btn btn-primary" href="home">Ir a home</a>
                        <button type="button" class="btn btn-primary" ng-click="back()">
                            Volver
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<ng-include src="'include/footer.html'"></ng-include>